(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{213:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("blockquote",[s("p",[t._v("使用腾讯云的Serverless服务，部署一个Go编写的天气变化的提醒应用\n该应用通过定时查询高德地图的"),s("a",{attrs:{href:"https://lbs.amap.com/api/webservice/guide/api/weatherinfo",target:"_blank",rel:"noopener noreferrer"}},[t._v("天气API"),s("OutboundLink")],1),t._v("，当当前天气或未来几天天气不好时，通过"),s("a",{attrs:{href:"http://sc.ftqq.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Server酱"),s("OutboundLink")],1),t._v("在微信中进行提醒")])]),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("应用使用 go modules开发")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._m(4),t._v(" "),t._m(5),t._m(6),t._v(" "),s("p",[t._v("在腾讯云的"),s("a",{attrs:{href:"https://console.cloud.tencent.com/scf/list?rid=8&ns=default",target:"_blank",rel:"noopener noreferrer"}},[t._v("Serverless服务"),s("OutboundLink")],1),t._v("中创建新的函数")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("配置共三项：")]),t._v(" "),s("ul",[s("li",[t._v("高德地图的SecretKey，可以在高德地图的"),s("a",{attrs:{href:"https://lbs.amap.com/dev/key/app",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制面板"),s("OutboundLink")],1),t._v("中添加应用后获取")]),t._v(" "),s("li",[t._v("Server酱的SecretKey，在发送的URL中可以找到")]),t._v(" "),s("li",[t._v("城市id，高德地图的城市id，可以在"),s("a",{attrs:{href:"https://lbs.amap.com/api/webservice/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("城市编码"),s("OutboundLink")],1),t._v("中找到")])]),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("在函数配置点击编辑，添加环境变量")]),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),s("p",[t._v("然后将main添加到压缩文件中")]),t._v(" "),t._m(17),t._v(" "),s("p",[t._v("在函数代码中上传压缩文件，保存")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),s("p",[t._v("待上传完成后，选择 HelloWorld测试模板，点击测试，等函数执行，会看到测试结果")]),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),s("hr"),t._v(" "),t._m(23),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://cloud.tencent.com/document/product/583/18032",target:"_blank",rel:"noopener noreferrer"}},[t._v("开发语言 Golang"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://lbs.amap.com/api/webservice/guide/api/weatherinfo",target:"_blank",rel:"noopener noreferrer"}},[t._v("天气查询"),s("OutboundLink")],1)])]),t._v(" "),t._m(24),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/helloworlde/weather",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/helloworlde/weather"),s("OutboundLink")],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"使用腾讯云的serverless部署应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用腾讯云的serverless部署应用","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用腾讯云的Serverless部署应用")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"构建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建应用","aria-hidden":"true"}},[this._v("#")]),this._v(" 构建应用")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("go.mod")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("module weather\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.12")]),t._v("\n\nrequire github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tencentyun"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("scf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190817080819")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("a2819cda320\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("main.go")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"os"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"strconv"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/tencentyun/scf-go-lib/cloudfunction"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"weather/tool"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tcloudfunction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("checkWeather"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkWeather")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"创建函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建函数","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建函数")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9oZWxsb3dvb2Rlcy5vc3MtY24tYmVpamluZy5hbGl5dW5jcy5jb20vYmxvZy9xY2xvdWQtc2VydmVybGVzcy8lRTUlODglOUIlRTUlQkIlQkElRTUlODclQkQlRTYlOTUlQjAucG5n?x-oss-process=image/format,png",alt:"创建函数"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"添加配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"添加环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加环境变量","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加环境变量")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("city       xxxx\nweatherKey xxxx\nnotifyKey  xxxx\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"上传函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传函数","aria-hidden":"true"}},[this._v("#")]),this._v(" 上传函数")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"本地编译打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#本地编译打包","aria-hidden":"true"}},[this._v("#")]),this._v(" 本地编译打包")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Mac/Linux")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("GOOS"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("linux GOARCH"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("amd64 go build -o main main.go\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("zip")]),this._v(" main.zip main\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Win")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" GOOS"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("linux\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" GOARCH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("amd64\ngo build -o main main.go\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"上传zip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传zip","aria-hidden":"true"}},[this._v("#")]),this._v(" 上传zip")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9oZWxsb3dvb2Rlcy5vc3MtY24tYmVpamluZy5hbGl5dW5jcy5jb20vYmxvZy9xY2xvdWQtc2VydmVybGVzcy8lRTQlQjglOEElRTQlQkMlQTAlRTUlODclQkQlRTYlOTUlQjAucG5n?x-oss-process=image/format,png",alt:"上传函数"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试","aria-hidden":"true"}},[this._v("#")]),this._v(" 测试")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9oZWxsb3dvb2Rlcy5vc3MtY24tYmVpamluZy5hbGl5dW5jcy5jb20vYmxvZy9xY2xvdWQtc2VydmVybGVzcy8lRTYlQjUlOEIlRTglQUYlOTUlRTUlODclQkQlRTYlOTUlQjAucG5n?x-oss-process=image/format,png",alt:"测试函数"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"添加触发方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加触发方式","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加触发方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在触发方式中添加定时触发，cron表达式为 "),e("code",[this._v("0 30 8-21 * * * *")]),this._v("，这样就可以在每天8点-21点的30分触发查询，如果天气状况不佳，会通过微信通知")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"参考文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文档","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考文档")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"项目地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目地址","aria-hidden":"true"}},[this._v("#")]),this._v(" 项目地址")])}],!1,null,null,null);r.options.__file="使用腾讯云的Serverless部署天气应用.md";e.default=r.exports}}]);