(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{175:function(t,e,r){"use strict";r.r(e);var i=r(0),n=Object(i.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),r("blockquote",[r("p",[t._v("使用 Eureka 请参考 "),r("a",{attrs:{href:"http://www.jianshu.com/p/fa1e9c8e4f47",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.jianshu.com/p/fa1e9c8e4f47"),r("OutboundLink")],1)])]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"spring-cloud-监控服务器下-ip-url-不正确导致无法注册的解决方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-监控服务器下-ip-url-不正确导致无法注册的解决方法","aria-hidden":"true"}},[this._v("#")]),this._v(" Spring Cloud 监控服务器下 IP/URL 不正确导致无法注册的解决方法")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("本项目仅用到了 Spring Cloud，并没有使用 Eureka")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("在使用 Spring Cloud 对 Spring Boot 应用通过 Spring Admin 进行监控的时候，当 Admin Server 和被监控的应用都在本地启动的时候没有任何问题，但是当部署到 Server 上之后，Client 在注册到 Admin Server 上时 IP 地址不正确，发现是因为 Server 有内网和外网 IP，但是在应用注册的时候用了内网的 IP，Admin Server 访问该内网 IP 失败，所以应用无法注册")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("因为没有使用 Eureka，所以配置时需要用 Spring Cloud 的配置来处理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("修改配置文件，添加以下内容")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("spring.boot.admin.client.service-base-url=http://${your_ip}:${your_port}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#说明","aria-hidden":"true"}},[this._v("#")]),this._v(" 说明")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("当没有任何配置的时候，会使用"),r("code",[t._v("http://bogon:9999/")]),t._v("注册")]),t._v(" "),r("li",[t._v("当 Client 加入了"),r("code",[t._v("spring.boot.admin.client.prefer-ip=true")]),t._v("的时候会以所得到的 IP 注册，此时 IP 为内网 IP，如果部署到服务器上将会无法注册")]),t._v(" "),r("li",[t._v("当 Client 配置为"),r("code",[t._v("spring.boot.admin.client.service-base-url=http://${your_ip}:${your_port}")]),t._v("时将会以所配置的地址进行注册")])])}],!1,null,null,null);n.options.__file="Spring-Cloud-监控服务器下-IP-URL-不正确导致无法注册的解决方法.md";e.default=n.exports}}]);