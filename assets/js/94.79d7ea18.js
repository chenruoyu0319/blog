(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{186:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"springboot-使用-mysql保存emoji-表情"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#springboot-使用-mysql保存emoji-表情","aria-hidden":"true"}},[t._v("#")]),t._v(" SpringBoot 使用 MySQL保存emoji 表情")]),t._v(" "),e("blockquote",[e("p",[t._v("在使用 SpringBoot 开发的应用中，有表单提交的内容中含有 emoji 表情，导致保存失败；这是因为MySQL 默认的 utf8 长度为3位，emoji 表情有4位")])]),t._v(" "),e("ul",[e("li",[t._v("更改表的字符集为"),e("code",[t._v("utf8mb4")])])]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" content "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8_general_ci"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("但是这样更改后仍然没有解决保存失败的问题")]),t._v(" "),e("ul",[e("li",[t._v("更改数据库的字符集")])]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DATABASE")]),t._v(" db_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8_general_ci"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("由于暂时不能重启数据库，这种修改方式只在当前连接中生效，同样未能解决问题")]),t._v(" "),e("ul",[e("li",[t._v("修改 SpringBoot 的配置")])]),t._v(" "),e("div",{staticClass:"language-dsconfig extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("spring.datasource.hikari.connection-init-sql=SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci\n")])])]),e("p",[t._v("这样，在应用的所有连接内都使用utf8mb4 作为字符集，解决了 emoji 保存失败的问题")])])}],!1,null,null,null);n.options.__file="SpringBoot-使用-MySQL保存emoji-表情.md";s.default=n.exports}}]);