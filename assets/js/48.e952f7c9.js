(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{232:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://github.com/kubernetes/dashboard",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kubenestes Dashboard"),s("OutboundLink")],1),t._v(" 是提供 Kubernetes信息可视化的 Web 插件")])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),s("p",[t._v("此时可以通过节点 IP 和端口"),s("a",{attrs:{href:"https://192.168.0.110:32576/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://192.168.0.110:32576/"),s("OutboundLink")],1),t._v("访问到 Dashboard(Chrome 可能会提示证书错误,无法访问,Fix)")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),s("p",[t._v("输入以下内容")]),t._v(" "),t._m(11),t._m(12),t._m(13),t._v(" "),s("p",[t._v("执行：")]),t._v(" "),t._m(14),t._m(15),s("p",[t._v("执行：")]),t._v(" "),t._m(16),t._m(17),s("p",[t._v("将获取到的 Token 输入到 Dashboard 的输入框中，登录即可")]),t._v(" "),t._m(18),t._v(" "),s("hr"),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),s("p",[t._v("查看 Dashboard Pod 的状态")]),t._v(" "),t._m(22),s("p",[t._v("查看 Pod 详细信息")]),t._v(" "),t._m(23),s("p",[t._v("最后一行可以看到在拉取镜像的时候失败了；可以先拉取镜像再启动，这里有两种解决办法：")]),t._v(" "),t._m(24),s("p",[t._v("拉取到镜像之后等待一会儿，Kubernetes 会自动创建新的 Pod；或者也可以删除 Dashboard 所有资源重新创建：")]),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),s("p",[t._v("以为是配置的问题，但是参考 "),s("a",{attrs:{href:"https://github.com/kubernetes/kubernetes/issues/50295#issuecomment-376603921",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/kubernetes/kubernetes/issues/50295#issuecomment-376603921"),s("OutboundLink")],1),t._v("，尝试后依然无法解决；最后尝试使用"),s("code",[t._v("kubeadm init")]),t._v("重新创建，提示")]),t._v(" "),t._m(29),s("p",[t._v("因为 Swap 导致Kubenetes 没有成功启动，执行关闭 swap，重新启动后解决问题")]),t._v(" "),t._m(30)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"kubenetes-部署-dashboard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubenetes-部署-dashboard","aria-hidden":"true"}},[this._v("#")]),this._v(" Kubenetes 部署 Dashboard")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署","aria-hidden":"true"}},[this._v("#")]),this._v(" 部署")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta1/aio/deploy/recommended.yaml\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"修改为通过-nodeport-访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改为通过-nodeport-访问","aria-hidden":"true"}},[this._v("#")]),this._v(" 修改为通过 NodePort 访问")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl -n kubernetes-dashboard edit "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("service")]),this._v(" kubernetes-dashboard\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("在 "),s("code",[t._v("ports")]),t._v("下面添加"),s("code",[t._v("nodePort: 32576")]),t._v("，将 "),s("code",[t._v("clusterIp")]),t._v("改为"),s("code",[t._v("NodePort")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clusterIP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.104.3.252\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("externalTrafficPolicy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Cluster\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nodePort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32576")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("protocol")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TCP\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("targetPort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8443")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("k8s-app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubernetes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dashboard\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sessionAffinity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" None\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NodePort\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"hellowoodes.oss-cn-beijing.aliyuncs.com/blog/KubernetesDashboard-1.png",alt:"Dashboard"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"创建-serviceaccount"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-serviceaccount","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建 ServiceAccount")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("vi")]),this._v(" admin-role.yaml\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ClusterRoleBinding\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rbac.authorization.k8s.io/v1beta1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rbac.authorization.kubernetes.io/autoupdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roleRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ClusterRole\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cluster"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("admin\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rbac.authorization.k8s.io\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("subjects")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ServiceAccount\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubernetes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dashboard\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ServiceAccount\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubernetes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dashboard\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kubernetes.io/cluster-service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("addonmanager.kubernetes.io/mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Reconcile\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl apply -f admin-role.yaml\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"获取-token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取-token","aria-hidden":"true"}},[this._v("#")]),this._v(" 获取 Token")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl -n kubernetes-dashboard  get secret"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("grep")]),this._v(" admin-token\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("admin-token-r8b4b                        kubernetes.io/service-account-token   3      48m\nkubernetes-dashboard-admin-token-qlnhp   kubernetes.io/service-account-token   3      60m\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl -n kubernetes-dashboard describe secret admin-token-r8b4b\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("Name:         admin-token-r8b4b\nNamespace:    kubernetes-dashboard\nLabels:       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nAnnotations:  kubernetes.io/service-account.name: admin\n              kubernetes.io/service-account.uid: 03a2bca0-b6c0-4cde-93aa-c4a6cd70dfdb\n\nType:  kubernetes.io/service-account-token\n\nData\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v("\nca.crt:     1025 bytes\nnamespace:  20 bytes\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi10b2tlbi1yOGI0YiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJhZG1pbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjAzYTJiY2EwLWI2YzAtNGNkZS05M2FhLWM0YTZjZDcwZGZkYiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbiJ9.g_dtJjhbLVfJRcdhlyYH-ekn08Dv3_Ok9oMZ7o0jU0Ri90sIhaANaprVlGK7QiKzIkz_BNT1Hw_reAseoOy7smFriKhn4a4wPMO0Ir1aJPavDdoVIEhBDHHzrukXl3mVO92WgkBkAMIo8HoVve-1pj9QVtT7hu_e8GXifyLu1v6s26lMbVouG8cPD4hzM2grRfhCt7qjioP3Gs6khtmHysu_uCBNW63HvuwzMBRS-lSr1ewWld4QnrvgqJ-IfLqAcjHjysNR26Xi9IBAswkq0E-1qSgIyduALITXx9FK9RqNBOTZ33OeDBCE-OYqmlIItDuYl4qRaksV3mccL4RVWA\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"hellowoodes.oss-cn-beijing.aliyuncs.com/blog/KubernetesDashboard-2.png",alt:"DashboardAfterLogin"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"遇到的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 遇到的问题")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"_1-访问页面提示serviceunavailable"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-访问页面提示serviceunavailable","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 访问页面提示ServiceUnavailable")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kind"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Status"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apiVersion"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"metadata"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failure"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no endpoints available for service \\"https:kubernetes-dashboard:\\""')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reason"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ServiceUnavailable"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" 503\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl get pods -n kube-system "),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("|")]),this._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("grep")]),this._v(" dashboard\nkubernetes-dashboard-77fd78f978-zqbs4   0/1     ImagePullBackOff   0          115m\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl -n kube-system describe pod kubernetes-dashboard-77fd78f978-zqbs4\nName:               kubernetes-dashboard-77fd78f978-zqbs4\nNamespace:          kube-system\nPriority:           0\nPriorityClassName:  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nNode:               ubuntu/192.168.111.129\nStart Time:         Tue, 16 Oct 2018 09:50:14 +0000\nLabels:             k8s-app"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("kubernetes-dashboard\n                    pod-template-hash"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("77fd78f978\nAnnotations:        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nStatus:             Pending\nIP:                 10.32.0.4\nControlled By:      ReplicaSet/kubernetes-dashboard-77fd78f978\nContainers:\n  kubernetes-dashboard:\n    Container ID:\n    Image:         k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.0\n    Image ID:\n    Port:          8443/TCP\n    Host Port:     0/TCP\n    Args:\n      --auto-generate-certificates\n    State:          Waiting\n      Reason:       ImagePullBackOff\n    Ready:          False\n    Restart Count:  0\n    Liveness:       http-get https://:8443/ delay"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("30s timeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("30s period"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("10s "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#success=1 #failure=3")]),t._v("\n    Environment:    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    Mounts:\n      /certs from kubernetes-dashboard-certs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      /tmp from tmp-volume "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      /var/run/secrets/kubernetes.io/serviceaccount from kubernetes-dashboard-token-7skvp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ro"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nConditions:\n  Type              Status\n  Initialized       True\n  Ready             False\n  ContainersReady   False\n  PodScheduled      True\nVolumes:\n  kubernetes-dashboard-certs:\n    Type:        Secret "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a volume populated by a Secret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    SecretName:  kubernetes-dashboard-certs\n    Optional:    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  tmp-volume:\n    Type:    EmptyDir "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a temporary directory that shares a pod's lifetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Medium:\n  kubernetes-dashboard-token-7skvp:\n    Type:        Secret "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a volume populated by a Secret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    SecretName:  kubernetes-dashboard-token-7skvp\n    Optional:    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nQoS Class:       BestEffort\nNode-Selectors:  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nTolerations:     node-role.kubernetes.io/master:NoSchedule\n                 node.kubernetes.io/not-ready:NoExecute "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" 300s\n                 node.kubernetes.io/unreachable:NoExecute "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" 300s\nEvents:\n  Type     Reason   Age                     From             Message\n  ----     ------   ----                    ----             -------\n  Warning  Failed   9m17s "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x458 over 119m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  kubelet, ubuntu  Error: ImagePullBackOff\n  Normal   BackOff  4m14s "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x479 over 119m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  kubelet, ubuntu  Back-off pulling image "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.0"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 1. 如果网络可以拉取到镜像，直接手动拉取即可")]),this._v("\ndocker pull k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.0\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 2. 如果拉取不到，尝试从其他镜像源拉取重新打标签")]),this._v("\ndocker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kubernetes-dashboard-amd64:v1.10.0\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kubernetes-dashboard-amd64:v1.10.0 k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.0\ndocker rmi registry.cn-hangzhou.aliyuncs.com/google_containers/kubernetes-dashboard-amd64:v1.10.0\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("kubectl delete -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"_2-重启后使用-kubectl-提示-the-connection-to-the-server-192-168-111-129-6443-was-refused-did-you-specify-the-right-host-or-port"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-重启后使用-kubectl-提示-the-connection-to-the-server-192-168-111-129-6443-was-refused-did-you-specify-the-right-host-or-port","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 重启后使用  kubectl 提示 "),e("code",[this._v("The connection to the server 192.168.111.129:6443 was refused - did you specify the right host or port?")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("重启Ubuntu 后，访问Dashboard timeout，通过"),e("code",[this._v("kubectl get pods -n kube-system")]),this._v("查看 Pod 状态，提示")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("The connection to the server 192.168.111.129:6443 was refused - did you specify the right host or port?\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("running with swap on is not supported. Please disable swap\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" swapoff -a\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -u"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" -g"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HOME")]),t._v("/.kube/config\n")])])])}],!1,null,null,null);n.options.__file="Kubenetes-部署-Dashboard.md";e.default=n.exports}}]);