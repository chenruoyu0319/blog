(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{198:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"spring-controller-数据传递中注解的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-controller-数据传递中注解的使用","aria-hidden":"true"}},[t._v("#")]),t._v(" Spring Controller 数据传递中注解的使用")]),t._v(" "),s("h2",{attrs:{id:"根据处理request的不同内容分为4类："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#根据处理request的不同内容分为4类：","aria-hidden":"true"}},[t._v("#")]),t._v(" 根据处理Request的不同内容分为4类：")]),t._v(" "),s("ol",[s("li",[t._v("处理"),s("code",[t._v("Request URI")]),t._v("部分的注解："),s("code",[t._v("@PathVariable")])]),t._v(" "),s("li",[t._v("处理"),s("code",[t._v("Request Header")]),t._v("部分的注解："),s("code",[t._v("@RequestHeader")]),t._v("，"),s("code",[t._v("@CookieValue")])]),t._v(" "),s("li",[t._v("处理"),s("code",[t._v("Request Body")]),t._v("部分的注解："),s("code",[t._v("@RequestParam")]),t._v("，"),s("code",[t._v("@RequestBody")])]),t._v(" "),s("li",[t._v("处理"),s("code",[t._v("Attribute")]),t._v("类型的注解："),s("code",[t._v("@SessionAttribute")]),t._v("，"),s("code",[t._v("@ModelAttribute")])])]),t._v(" "),s("h2",{attrs:{id:"pathvariable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pathvariable","aria-hidden":"true"}},[t._v("#")]),t._v(" @PathVariable")]),t._v(" "),s("ul",[s("li",[t._v("当使用"),s("code",[t._v("@RequestMapping URI template")]),t._v("样式映射时，即"),s("code",[t._v("url/{param}")]),t._v("，这时"),s("code",[t._v("param")]),t._v("可以通过"),s("code",[t._v("@PathVariable")]),t._v("注解绑定它传过来的值到方法的参数上")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RelativePathUriTemplateController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n\n      "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/url/{param}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" String param"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),s("h2",{attrs:{id:"requestheader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requestheader","aria-hidden":"true"}},[t._v("#")]),t._v(" @RequestHeader")]),t._v(" "),s("ul",[s("li",[t._v("可以把"),s("code",[t._v("Request")]),t._v("请求的"),s("code",[t._v("Header")]),t._v("部分的值绑定到方法的参数上")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    Host                    localhost:8080  \n    Accept                  text/html,application/xhtml+xml,application/xml;q=0.9  \n    Accept-Language         fr,en-gb;q=0.7,en;q=0.3  \n    Accept-Encoding         gzip,deflate  \n    Accept-Charset          ISO-8859-1,utf-8;q=0.7,*;q=0.7  \n    Keep-Alive              300  \n")])])]),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("displayHeaderInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accept-Encoding"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String encoding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n                                  "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Keep-Alive"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" keepAlive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n      \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...  ")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("把"),s("code",[t._v("request header")]),t._v("部分的 "),s("code",[t._v("Accept-Encoding")]),t._v("的值，绑定到参数"),s("code",[t._v("encoding")]),t._v("上了， "),s("code",[t._v("Keep-Alive header")]),t._v("的值绑定到参数"),s("code",[t._v("keepAlive")]),t._v("上。")])]),t._v(" "),s("h2",{attrs:{id:"cookievalue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookievalue","aria-hidden":"true"}},[t._v("#")]),t._v(" @CookieValue")]),t._v(" "),s("ul",[s("li",[t._v("可以把"),s("code",[t._v("RequestHeader")]),t._v("中关于"),s("code",[t._v("cookie")]),t._v("的值绑定到方法的参数上")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("displayHeaderInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CookieValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JSESSIONID"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String cookie"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...  ")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"requestbody"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requestbody","aria-hidden":"true"}},[t._v("#")]),t._v(" @RequestBody")]),t._v(" "),s("ul",[s("li",[t._v("通常用来处理"),s("code",[t._v("Content-Type")]),t._v("不是"),s("code",[t._v("application/x-www-form-urlencoded")]),t._v("编码的内容，例如"),s("code",[t._v("application/json")]),t._v("，"),s("code",[t._v("application/xml")]),t._v("等")]),t._v(" "),s("li",[t._v("通过使用"),s("code",[t._v("HandlerAdapter")]),t._v("配置的"),s("code",[t._v("HttpMessageConverter")]),t._v("来解析"),s("code",[t._v("data body")]),t._v("，然后绑定到相应的"),s("code",[t._v("Bean")]),t._v("上")]),t._v(" "),s("li",[t._v("因为配置有"),s("code",[t._v("FormHttpMessageConverter")]),t._v("，所以也可以用来处理"),s("code",[t._v("application/x-www-form-urlencoded")]),t._v("的内容，处理完的结果放在一个"),s("code",[t._v("MultiValueMap<String,Stirng>")]),t._v("里")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" RequestMethod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("POST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" String body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" IOException "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"responsebody"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#responsebody","aria-hidden":"true"}},[t._v("#")]),t._v(" @ResponseBody")]),t._v(" "),s("ul",[s("li",[t._v("该注解用于将"),s("code",[t._v("Controller")]),t._v("的方法返回的对象，通过适当的"),s("code",[t._v("HttpMessageConverter")]),t._v("转换为指定格式的数据写入到"),s("code",[t._v("Response")]),t._v("对象的"),s("code",[t._v("body")]),t._v("数据区")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" RedirectView "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("root")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedirectView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/index/index.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"sessionattributes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sessionattributes","aria-hidden":"true"}},[t._v("#")]),t._v(" @SessionAttributes")]),t._v(" "),s("ul",[s("li",[t._v("用来绑定"),s("code",[t._v("HttpSession")]),t._v("中的"),s("code",[t._v("Attribute")]),t._v("对象的值")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/editPet.do"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SessionAttributes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pet"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EditPetForm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...  ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),s("h2",{attrs:{id:"modelattribute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#modelattribute","aria-hidden":"true"}},[t._v("#")]),t._v(" @ModelAttribute")]),t._v(" "),s("ul",[s("li",[t._v("用于方法上时通常用来处理"),s("code",[t._v("@RequestMapping")]),t._v("之前，为请求绑定需要从后台查询的"),s("code",[t._v("Model")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ModelAttribute")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" Account "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAccount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),t._v(" String number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" accountManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAccount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),s("blockquote",[s("p",[t._v("这种方式实际的效果就是在调用"),s("code",[t._v("@RequestMapping")]),t._v("的方法之前，为"),s("code",[t._v("request")]),t._v("对象的"),s("code",[t._v("model")]),t._v("里"),s("code",[t._v('put（"account",Account）')])])]),t._v(" "),s("ul",[s("li",[t._v("用于参数上时通过名称对应，把相应名称的值绑定到注解的参数"),s("code",[t._v("Bean")]),t._v("上，要绑定的值来源于\n"),s("ul",[s("li",[s("code",[t._v("@SessionAttributes")]),t._v("启用的"),s("code",[t._v("Attribute")]),t._v("对象")]),t._v(" "),s("li",[s("code",[t._v("@ModelAttribute")]),t._v("用于方法上时指定的"),s("code",[t._v("Model")]),t._v("对象")]),t._v(" "),s("li",[t._v("以上两种情况都没有时，"),s("code",[t._v("new")]),t._v("一个需要绑定的"),s("code",[t._v("Bean")]),t._v("对象，然后把"),s("code",[t._v("Request")]),t._v("中按名称对应的方式把值绑定到"),s("code",[t._v("Bean")]),t._v("中")])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/owners/{ownerId}/pets/{petId}/edit"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" RequestMethod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("POST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" String "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processSubmit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ModelAttribute")]),t._v(" Pet pet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),s("blockquote",[s("p",[t._v("首先查询 "),s("code",[t._v("@SessionAttributes")]),t._v("有无绑定的Pet对象，若没有则查询"),s("code",[t._v("@ModelAttribute")]),t._v("方法层面上是否绑定了Pet对象，若没有则将"),s("code",[t._v("URI template")]),t._v("中的值按对应的名称绑定到Pet对象的各属性上")])])])}],!1,null,null,null);n.options.__file="Spring-Controller-数据传递中注解的使用.md";a.default=n.exports}}]);